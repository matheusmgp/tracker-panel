<div class="socket-panel">
  <div class="status-bar">
    <span
      class="status-indicator"
      [class.connected]="(connectionStatus$ | async)?.status"
    >
      {{ (connectionStatus$ | async)?.status ? "Conectado" : "Desconectado" }}
      <span
        class="connection-time"
        *ngIf="(connectionStatus$ | async)?.connectedAt"
      >
        (Conectado em:
        {{
          (connectionStatus$ | async)?.connectedAt
            | date : "dd/MM/yyyy HH:mm:ss"
        }})
      </span>
      <span
        class="disconnection-time"
        *ngIf="(connectionStatus$ | async)?.disconnectedAt"
      >
        (Desconectado em:
        {{
          (connectionStatus$ | async)?.disconnectedAt
            | date : "dd/MM/yyyy HH:mm:ss"
        }})
      </span>
    </span>
    <span class="message-counter" *ngIf="(connectionStatus$ | async)?.status">
      Mensagens: {{ (messages$ | async)?.length || 0 }}
    </span>
    <button class="reload-button" (click)="reloadPage()">
      <i class="fas fa-sync-alt"></i> Recarregar
    </button>
  </div>

  <div class="messages-container">
    <div *ngFor="let message of messages$ | async" class="message">
      <div class="message-header">
        <span class="timestamp">{{
          message.timestamp | date : "dd/MM/yyyy HH:mm:ss"
        }}</span>
        <span class="event">{{ message.event }}</span>
      </div>
      <div class="message-data">{{ message.data }}</div>
    </div>
  </div>
</div>
